<ng-container
  *ngFor="let asset of daysArray; let indexOfelement = index"
  [ngTemplateOutlet]="assetTimelineFrame"
  [ngTemplateOutletContext]="{ asset: asset, indexOfelement: indexOfelement }"
>
</ng-container>

<ng-template
  #assetTimelineFrame
  let-asset="asset"
  let-indexOfelement="indexOfelement"
>
  <div class="asset-timeline" [ngClass]="'asset-timeline-' + indexOfelement">
    <div class="asset-identifier">
      <div>Asset: {{ asset.name }}.</div>
      <div>Period: {{ getPeriod(asset) }}</div>
    </div>

    <!-- Can become component -->
    <ng-container
      [ngTemplateOutlet]="timeline"
      [ngTemplateOutletContext]="{
        asset: asset,
        indexOfelement: indexOfelement
      }"
    ></ng-container>
  </div>
</ng-template>

<ng-template #timeline let-asset="asset" let-indexOfelement="indexOfelement">
  <div class="timeline"></div>

  <ng-container *ngFor="let day of asset.days">
    <div
      class="emptyDay asset-timeline-action"
      *ngIf="day.even.length === 0 && day.odd.length === 0"
    ></div>

    <!-- odd -->
    <div
      class="asset-timeline-action"
      *ngFor="let action of day.odd"
      [class.action]="action?.action && !action?.type"
      [class.milestone]="action?.type === 'milestone'"
    >
      <span class="action-label-date">
        {{ action.date.format('MMM Do, YYYY') }}
      </span>
      <div class="action-label">
        {{ action.action }}
      </div>
      <div class="action-timeline-line-to-dot"></div>
      <div class="action-timeline-dot"></div>
    </div>

    <!-- .even -->
    <div
      class="asset-timeline-action"
      *ngFor="let action of day.even"
      [class.action]="action?.action && !action?.type"
      [class.milestone]="action?.type === 'milestone'"
    >
      <span class="action-label-date">
        {{ action.date.format('MMM Do, YYYY') }}
      </span>
      <div class="action-label">
        {{ action.action }}
      </div>
      <div class="action-timeline-line-to-dot"></div>
      <div class="action-timeline-dot"></div>
    </div>
  </ng-container>
</ng-template>
